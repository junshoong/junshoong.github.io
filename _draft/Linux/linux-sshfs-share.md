Title: [Linux] sshfs로 리눅스간 디렉터리 공유하기
Date: 2015-11-17
Category: Linux
Tags: linux, shell, ssh
Slug: linux-sshfs-share
Authors: junshoong

집에 있는 리눅스 데스크톱과 디렉터리를 공유하고 싶다. 그래서 조금 찾아봤더니 sshfs라는 방법이 있다.

ssh 연결을 기반으로 하기 때문에 일단 ssh 접속이 가능해야 한다. 그러므로 일단 서버에서 ssh server를 열어줘야 하기 때문에 openssh를 받아서 데몬으로 돌려준다.

그리고 개인 취향에 따라 ssh 포트를 변경해줘도 된다. 이 부분은 설정 파일을 조금 수정하면 되는데 여기 서는 다루지 않겠다.


준비가 되었으면 클라이언트에서 루트로 접속하여 아래와 같이 입력한다.

```bash
# sshfs [ 사용자 이름 ]@[ IP 주소 ]:[ 서버의 디렉터리 경로 ] [ 클라이언트의 마운트 경로] [-o allow_other] [-o reconnect] [-p  포트 번호]
```

찬찬히 둘러보자. 일단 사용자 이름은 서버에 접속할 수 있는 서버의 계정 명이다. IP 주소는 서버 IP 주소이고 공유받고 싶은 서버 디렉터리를 지정해준다.

클라이언트의 마운트 경로는 어떤 디렉터리로 공유를 받을 지 정하는 것이다.

옵션을 살펴보자. `-o allow_other`는 명령을 내린 root 이외의 사용자도 접속할 수 있게 해주는 옵션이다. 이 옵션이 없으면 루트만 접근 가능하다.

`-o reconnect`는 접속이 비정상적으로 끊겼을 때 다시 접속할 때 사용한다. -p 포트 번호는 디폴트 포트인 22번 포트가 아닌 경우에 사용한다.


간혹 연결 에러가 발생해서 정상적으로 해제 되지 않을 때가 있는 데, 그럴 때면 아래와 같이 마운트를 해제해 준다.

```bash
# umount -l [ 클라이언트 마운트 경로 ]
```

정상적으로 해제 되면 다시 위에 있는 명령어로 연결 시켜준다.
